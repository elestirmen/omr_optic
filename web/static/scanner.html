<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TarayÄ±cÄ± - OMRChecker</title>
    <link rel="stylesheet" href="css/styles.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <nav class="navbar">
        <div class="nav-brand">
            <span class="logo">ğŸ“‹</span>
            <span class="brand-text">OMRChecker</span>
        </div>
        <div class="nav-links">
            <a href="index.html" class="nav-link">Ana Sayfa</a>
            <a href="process.html" class="nav-link">OMR Ä°ÅŸleme</a>
            <a href="scanner.html" class="nav-link active">TarayÄ±cÄ±</a>
            <a href="templates.html" class="nav-link">Åablonlar</a>
            <a href="analysis.html" class="nav-link">SonuÃ§lar</a>
        </div>
        <div class="nav-status">
            <span class="status-indicator online"></span>
            <span id="server-status">BaÄŸlÄ±</span>
        </div>
    </nav>

    <main class="container">
        <div class="page-header">
            <h1>ğŸ–¨ï¸ TarayÄ±cÄ± KontrolÃ¼</h1>
            <p>BaÄŸlÄ± tarayÄ±cÄ±dan OMR formlarÄ±nÄ± tarayÄ±n ve iÅŸleyin</p>
        </div>

        <div class="scanner-layout">
            <!-- Scanner Control Panel -->
            <div class="panel scanner-panel">
                <div class="panel-header">
                    <h2>TarayÄ±cÄ± AyarlarÄ±</h2>
                    <button class="btn btn-sm btn-ghost" id="refresh-devices">
                        ğŸ”„ Yenile
                    </button>
                </div>

                <!-- Device Selection -->
                <div class="form-group">
                    <label for="device-select">TarayÄ±cÄ± SeÃ§in</label>
                    <select id="device-select" class="form-control">
                        <option value="">-- Cihaz aranÄ±yor... --</option>
                    </select>
                </div>

                <!-- Scanner Info -->
                <div class="scanner-info" id="scanner-info">
                    <div class="info-row">
                        <span class="info-label">Platform:</span>
                        <span class="info-value" id="platform-info">-</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">Protokol:</span>
                        <span class="info-value" id="protocol-info">-</span>
                    </div>
                    <div class="info-row">
                        <span class="info-label">ADF DesteÄŸi:</span>
                        <span class="info-value" id="adf-info">-</span>
                    </div>
                </div>

                <!-- Scan Options -->
                <div class="scan-options">
                    <h3>Tarama SeÃ§enekleri</h3>

                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="use-adf" checked>
                            <span class="checkmark"></span>
                            Otomatik Belge Besleyici (ADF) Kullan
                        </label>
                        <small class="form-hint" id="adf-hint">Birden fazla sayfa iÃ§in etkinleÅŸtirin</small>
                    </div>

                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="auto-process" checked>
                            <span class="checkmark"></span>
                            Tarama SonrasÄ± Otomatik Ä°ÅŸle
                        </label>
                    </div>

                    <div class="form-group">
                        <label class="checkbox-label">
                            <input type="checkbox" id="show-ui" checked>
                            <span class="checkmark"></span>
                            TarayÄ±cÄ± arayÃ¼zÃ¼nÃ¼ gÃ¶ster (Epson Scan)
                        </label>
                        <small class="form-hint">KapatÄ±rsanÄ±z uygulama sessiz taramayÄ± dener; bazÄ± Epson sÃ¼rÃ¼cÃ¼leri bunu desteklemez.</small>
                    </div>

                    <div class="form-group">
                        <label for="scan-template">Ä°ÅŸleme Åablonu</label>
                        <select id="scan-template" class="form-control">
                            <option value="">-- Åablon SeÃ§in --</option>
                        </select>
                    </div>
                </div>

                <!-- Scan Button -->
                <button class="btn btn-primary btn-block btn-lg" id="scan-btn">
                    <span class="btn-icon">ğŸ–¨ï¸</span>
                    TaramayÄ± BaÅŸlat
                </button>

                <!-- Cancel Button (hidden by default) -->
                <button class="btn btn-danger btn-block" id="cancel-btn" style="display:none;">
                    <span class="btn-icon">â¹ï¸</span>
                    Ä°ptal Et
                </button>

                <!-- Flatbed multi-scan controls (shown when ADF is off) -->
                <button class="btn btn-outline btn-block" id="scan-next-btn" style="display:none;">
                    <span class="btn-icon">ğŸ“„</span>
                    Sonraki SayfayÄ± Tara (Flatbed)
                </button>
                <button class="btn btn-outline btn-block" id="finish-scan-btn" style="display:none;">
                    <span class="btn-icon">âœ…</span>
                    Ä°ÅŸlemeyi BaÅŸlat
                </button>
            </div>

            <!-- Scan Status & Preview -->
            <div class="panel preview-panel">
                <div class="panel-header">
                    <h2>Tarama Durumu</h2>
                </div>

                <div class="scan-warnings" id="scan-warnings" style="display:none;"></div>

                <!-- Status Section -->
                <div class="scan-status" id="scan-status">
                    <div class="status-idle">
                        <span class="status-icon">ğŸ“„</span>
                        <p>Tarama iÃ§in hazÄ±r</p>
                        <small>TarayÄ±cÄ± seÃ§in ve baÅŸlatÄ±n</small>
                    </div>
                </div>

                <!-- Progress Section -->
                <div class="scan-progress" id="scan-progress" style="display:none;">
                    <div class="progress-ring">
                        <svg viewBox="0 0 100 100">
                            <circle class="progress-ring-bg" cx="50" cy="50" r="45" />
                            <circle class="progress-ring-fill" cx="50" cy="50" r="45" id="progress-ring" />
                        </svg>
                        <span class="progress-number" id="pages-count">0</span>
                    </div>
                    <p class="progress-label">sayfa tarandÄ±</p>
                </div>

                <!-- Scanned Pages Preview -->
                <div class="scanned-pages" id="scanned-pages" style="display:none;">
                    <h3>Taranan Sayfalar</h3>
                    <div class="page-thumbnails" id="page-thumbnails"></div>
                </div>

                <!-- Results Section -->
                <div class="scan-results" id="scan-results" style="display:none;">
                    <div class="result-summary">
                        <div class="summary-item">
                            <span class="summary-number" id="total-scanned">0</span>
                            <span class="summary-label">Sayfa TarandÄ±</span>
                        </div>
                        <div class="summary-item">
                            <span class="summary-number" id="total-processed">0</span>
                            <span class="summary-label">Form Ä°ÅŸlendi</span>
                        </div>
                    </div>
                    <div class="result-actions">
                        <a href="#" class="btn btn-primary" id="view-results-btn">
                            ğŸ“Š SonuÃ§larÄ± GÃ¶rÃ¼ntÃ¼le
                        </a>
                        <button class="btn btn-outline" id="download-results-btn">
                            ğŸ“¥ CSV Ä°ndir
                        </button>
                        <button class="btn btn-outline" id="download-excel-btn">
                            ğŸ“¥ Excel Ä°ndir
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Instructions -->
        <section class="instructions">
            <h2>KullanÄ±m TalimatlarÄ±</h2>
            <div class="instruction-cards">
                <div class="instruction-card">
                    <span class="step-number">1</span>
                    <h3>TarayÄ±cÄ± BaÄŸlayÄ±n</h3>
                    <p>USB veya aÄŸ Ã¼zerinden tarayÄ±cÄ±nÄ±zÄ± baÄŸlayÄ±n</p>
                </div>
                <div class="instruction-card">
                    <span class="step-number">2</span>
                    <h3>FormlarÄ± YerleÅŸtirin</h3>
                    <p>OMR formlarÄ±nÄ± ADF besleyiciye yerleÅŸtirin</p>
                </div>
                <div class="instruction-card">
                    <span class="step-number">3</span>
                    <h3>TaramayÄ± BaÅŸlatÄ±n</h3>
                    <p>Åablon seÃ§in ve taramayÄ± baÅŸlatÄ±n</p>
                </div>
                <div class="instruction-card">
                    <span class="step-number">4</span>
                    <h3>SonuÃ§larÄ± AlÄ±n</h3>
                    <p>Ä°ÅŸlenen sonuÃ§larÄ± CSV olarak indirin</p>
                </div>
            </div>
        </section>
    </main>

    <script src="js/scanner.js"></script>
</body>

</html>
